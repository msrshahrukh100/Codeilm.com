const toHash = require('.')

test('should work if nothing is passed', () => {
  expect(toHash()).toEqual({})
})

test('should throw if non-Arrays are passed', () => {
  expect(() => toHash({})).toThrow()
  expect(() => toHash('string')).toThrow()
  expect(() => toHash(0)).toThrow()
})


test('should default to key `id`', () => {
  const list = [
    {
      id: 1,
      name: 'Mike'
    },
    {
      id: 2,
      name: 'Nick'
    }
  ]
  expect(toHash(list)).toEqual({
    1: {
      id: 1,
      name: 'Mike'
    },
    2: {
      id: 2,
      name: 'Nick'
    }
  })
})

test('should skip null values', () => {
  const list = [
    null,
    {
      id: null
    },
    {
      id: 1,
      name: 'Mike'
    }
  ]

  expect(toHash(list)).toEqual({
    1: {
      id: 1,
      name: 'Mike'
    }
  })
})

test('should allow you to pass a new key to hash on', () => {
  const list = [
    {
      id: 1,
      name: 'Mike'
    },
    {
      id: 2,
      name: 'Nick'
    }
  ]
  expect(toHash(list, 'name')).toEqual({
    Mike: {
      id: 1,
      name: 'Mike'
    },
    Nick: {
      id: 2,
      name: 'Nick'
    }
  })
})
