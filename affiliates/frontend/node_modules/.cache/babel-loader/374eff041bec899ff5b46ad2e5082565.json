{"ast":null,"code":"import _defineProperty from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/src/containers/TutorialList/TutorialList.js\";\nimport React from 'react';\nimport axios from '../../lovecodeaxios';\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\nimport MediaCard from '../../components/UI/MediaCard/MediaCard';\nimport TutorialInfo from '../../components/TutorialInfo/TutorialInfo';\nimport { withRouter } from \"react-router\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport PageLayout from '../../components/UI/PageLayout/PageLayout';\nimport ListPageSkeleton from '../../components/UI/SkeletonLoaders/ListPageSkeleton';\nimport { withStyles } from '@material-ui/core/styles';\nimport LikeButton from '../LikeButton/LikeButton';\nimport ViewsPanel from '../../components/ViewsPanel/ViewsPanel';\nimport { MdModeEdit } from \"react-icons/md\";\nimport Button from '@material-ui/core/Button';\nimport BasicMetaTags from '../../components/MetaTags/BasicMetaTags';\nimport ShareButton from '../ShareButton/ShareButton';\nimport Grid from '@material-ui/core/Grid';\nimport CoolButton from '../../components/UI/CoolButton/CoolButton';\nimport Chips from '../../components/UI/Chips/Chips';\nimport { Link } from 'react-router-dom';\nimport Tooltip from '@material-ui/core/Tooltip';\n\nvar styles = function styles(theme) {\n  return {\n    margin: {\n      margin: theme.spacing(2),\n      marginRight: theme.spacing(3)\n    },\n    chips: {\n      marginTop: theme.spacing(1.5),\n      marginLeft: theme.spacing(2),\n      marginBottom: theme.spacing(1.5)\n    },\n    metricsButton: {\n      textTransform: 'none',\n      marginLeft: theme.spacing()\n    },\n    iconSmall: {\n      fontSize: 20\n    },\n    coolButton: {\n      marginLeft: theme.spacing(2),\n      marginTop: theme.spacing(5)\n    }\n  };\n};\n\nvar TutorialList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TutorialList, _React$Component);\n\n  function TutorialList(props) {\n    var _this$state;\n\n    var _this;\n\n    _classCallCheck(this, TutorialList);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TutorialList).call(this, props));\n\n    _this.fetchTutorials = function () {\n      _this.setState({\n        loading: true\n      });\n\n      var url = _this.state.pageNumber ? _this.state.q ? \"/tutorials/?page=\".concat(_this.state.pageNumber, \"&q=\").concat(_this.state.q) : \"/tutorials/?page=\".concat(_this.state.pageNumber) : _this.state.q ? \"/tutorials/?q=\".concat(_this.state.q) : \"/tutorials\";\n      axios.get(url).then(function (response) {\n        _this.setState(function (state) {\n          return {\n            tutorials: state.tutorials.concat(response.data.results),\n            loading: false,\n            pageNumber: response.data.next_page_number,\n            count: response.data.count\n          };\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this.setState({\n          error: error,\n          loading: false\n        });\n      });\n    };\n\n    var params = new URLSearchParams(props.location.search);\n    var q = params.get('q');\n    _this.state = (_this$state = {\n      tutorials: [],\n      loading: true,\n      error: null,\n      pageNumber: null,\n      count: 0\n    }, _defineProperty(_this$state, \"loading\", true), _defineProperty(_this$state, \"q\", q), _this$state);\n    return _this;\n  }\n\n  _createClass(TutorialList, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this2 = this;\n\n      var prevParams = new URLSearchParams(prevProps.location.search);\n      var prevq = prevParams.get('q');\n      var params = new URLSearchParams(this.props.location.search);\n      var q = params.get('q');\n\n      if (prevq !== q) {\n        this.setState({\n          q: q,\n          tutorials: []\n        }, function () {\n          return _this2.fetchTutorials();\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchTutorials();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var classes = this.props.classes;\n      var storiesList = React.createElement(InfiniteScroll, {\n        dataLength: this.state.tutorials.length,\n        next: this.fetchTutorials,\n        hasMore: this.state.pageNumber,\n        loader: React.createElement(PageLayout, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(ListPageSkeleton, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, this.state.tutorials.map(function (tutorial, index) {\n        var editUrl = tutorial.repository_name ? \"/create/\".concat(tutorial.repository_name, \"/\").concat(tutorial.id, \"/\").concat(tutorial.slug, \"/\").concat(tutorial.branch_name) : \"/create/new/\".concat(tutorial.id, \"/\").concat(tutorial.slug);\n        var actionButtons = React.createElement(React.Fragment, null, React.createElement(LikeButton, {\n          tutorial: tutorial,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }), React.createElement(ViewsPanel, {\n          tutorial: tutorial,\n          onClickHandler: function onClickHandler() {\n            return _this3.props.history.push('/metrics/' + tutorial.id + '/' + tutorial.slug);\n          },\n          ownerIsAuthenticatedUser: tutorial.owner_is_authenticated_user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }), React.createElement(ShareButton, {\n          url: 'https://codeilm.com/stories/' + tutorial.id + '/' + tutorial.slug,\n          title: tutorial.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }), tutorial.owner_is_authenticated_user ? React.createElement(React.Fragment, null, React.createElement(Tooltip, {\n          title: \"Edit\",\n          \"aria-label\": \"Edit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(Button, {\n          size: \"small\",\n          color: \"primary\",\n          className: classes.metricsButton,\n          onClick: function onClick() {\n            return _this3.props.history.push(editUrl);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(MdModeEdit, {\n          className: classes.iconSmall,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        })))) : null);\n        var linkUrl = \"/stories/?q=\";\n        var content = React.createElement(React.Fragment, null, React.createElement(\"div\", {\n          className: classes.chips,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, tutorial.tutorial_tags ? tutorial.tutorial_tags.map(function (tag) {\n          return React.createElement(Chips, {\n            key: tag.id,\n            link: linkUrl + tag.value,\n            chipsData: {\n              text: tag.label\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          });\n        }) : null), React.createElement(TutorialInfo, {\n          user: tutorial.user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }));\n        return React.createElement(MediaCard, {\n          headerVariant: \"h5\",\n          key: tutorial.id,\n          content: content,\n          onClick: function onClick() {\n            return _this3.props.history.push('/stories/' + tutorial.id + '/' + tutorial.slug);\n          },\n          actionButtons: actionButtons,\n          title: tutorial.title,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        });\n      }));\n      return React.createElement(React.Fragment, null, React.createElement(BasicMetaTags, {\n        title: \"Stories on Codeilm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), React.createElement(Grid, {\n        container: true,\n        spacing: 0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        lg: 9,\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.state.tutorials && this.state.tutorials.length != 0 ? storiesList : !this.state.loading ? React.createElement(React.Fragment, null, React.createElement(\"p\", {\n        style: {\n          fontSize: 20,\n          margin: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Sorry we couldn't find any story with the search query\", React.createElement(\"strong\", {\n        style: {\n          fontSize: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \" \", this.state.q)), React.createElement(\"p\", {\n        style: {\n          fontSize: 20,\n          margin: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/stories\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"See all the stories\"))) : null), React.createElement(Grid, {\n        item: true,\n        lg: 3,\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: classes.coolButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, this.state.loading ? null : React.createElement(CoolButton, {\n        text: \"Create\",\n        link: \"/create\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return TutorialList;\n}(React.Component);\n\nexport default withErrorHandler(withRouter(withStyles(styles)(TutorialList)), axios, \"list\");","map":{"version":3,"sources":["/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/src/containers/TutorialList/TutorialList.js"],"names":["React","axios","withErrorHandler","MediaCard","TutorialInfo","withRouter","InfiniteScroll","PageLayout","ListPageSkeleton","withStyles","LikeButton","ViewsPanel","MdModeEdit","Button","BasicMetaTags","ShareButton","Grid","CoolButton","Chips","Link","Tooltip","styles","theme","margin","spacing","marginRight","chips","marginTop","marginLeft","marginBottom","metricsButton","textTransform","iconSmall","fontSize","coolButton","TutorialList","props","fetchTutorials","setState","loading","url","state","pageNumber","q","get","then","response","tutorials","concat","data","results","next_page_number","count","catch","error","console","log","params","URLSearchParams","location","search","prevProps","prevParams","prevq","classes","storiesList","length","map","tutorial","index","editUrl","repository_name","id","slug","branch_name","actionButtons","history","push","owner_is_authenticated_user","title","linkUrl","content","tutorial_tags","tag","value","text","label","user","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from '../../lovecodeaxios'\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\nimport MediaCard from '../../components/UI/MediaCard/MediaCard'\nimport TutorialInfo from '../../components/TutorialInfo/TutorialInfo'\nimport { withRouter } from \"react-router\";\nimport InfiniteScroll from \"react-infinite-scroll-component\"\nimport PageLayout from '../../components/UI/PageLayout/PageLayout'\nimport ListPageSkeleton from '../../components/UI/SkeletonLoaders/ListPageSkeleton'\nimport { withStyles } from '@material-ui/core/styles';\nimport LikeButton from '../LikeButton/LikeButton'\nimport ViewsPanel from '../../components/ViewsPanel/ViewsPanel'\nimport { MdModeEdit } from \"react-icons/md\";\nimport Button from '@material-ui/core/Button';\nimport BasicMetaTags from '../../components/MetaTags/BasicMetaTags'\nimport ShareButton from '../ShareButton/ShareButton'\nimport Grid from '@material-ui/core/Grid';\nimport CoolButton from '../../components/UI/CoolButton/CoolButton'\nimport Chips from '../../components/UI/Chips/Chips'\nimport { Link } from 'react-router-dom'\nimport Tooltip from '@material-ui/core/Tooltip';\n\n\nconst styles = theme => ({\n  margin: {\n    margin: theme.spacing(2),\n    marginRight: theme.spacing(3),\n  },\n  chips: {\n    marginTop: theme.spacing(1.5),\n    marginLeft: theme.spacing(2),\n    marginBottom: theme.spacing(1.5)\n  },\n  metricsButton: {\n    textTransform: 'none',\n    marginLeft: theme.spacing()\n  },\n  iconSmall: {\n    fontSize: 20,\n  },\n  coolButton: {\n    marginLeft: theme.spacing(2),\n    marginTop: theme.spacing(5)\n  }\n});\n\n\n\n\nclass TutorialList extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    const params = new URLSearchParams(props.location.search);\n    const q = params.get('q');\n    this.state = {\n      tutorials: [],\n      loading: true,\n      error: null,\n      pageNumber: null,\n      count: 0,\n      loading: true,\n      q:q\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevParams = new URLSearchParams(prevProps.location.search);\n    const prevq = prevParams.get('q');\n\n    const params = new URLSearchParams(this.props.location.search);\n    const q = params.get('q');\n\n    if(prevq !== q) {\n      this.setState({q: q, tutorials: []}, () => this.fetchTutorials())\n    }\n  }\n\n  fetchTutorials = () => {\n    this.setState({loading: true})\n    const url = this.state.pageNumber ?\n      this.state.q ?\n        `/tutorials/?page=${this.state.pageNumber}&q=${this.state.q}`\n        : `/tutorials/?page=${this.state.pageNumber}`\n    : this.state.q ? `/tutorials/?q=${this.state.q}` : \"/tutorials\";\n    axios.get(url)\n      .then(response => {\n        this.setState(state => ({\n          tutorials: state.tutorials.concat(response.data.results),\n          loading: false,\n          pageNumber: response.data.next_page_number,\n          count: response.data.count\n        }))\n      })\n      .catch(error => {\n        console.log(error)\n        this.setState({\n          error: error,\n          loading: false\n        })\n      })\n  }\n\n  componentDidMount() {\n    this.fetchTutorials()\n  }\n\n  render() {\n    const { classes } = this.props;\n    const storiesList = (\n      <InfiniteScroll\n          dataLength={this.state.tutorials.length}\n          next={this.fetchTutorials}\n          hasMore={this.state.pageNumber}\n          loader={<PageLayout><ListPageSkeleton /></PageLayout>}\n      >\n      {this.state.tutorials.map((tutorial, index) => {\n        const editUrl = tutorial.repository_name ? `/create/${tutorial.repository_name}/${tutorial.id}/${tutorial.slug}/${tutorial.branch_name}`\n        : `/create/new/${tutorial.id}/${tutorial.slug}`\n        const actionButtons = (\n          <>\n          <LikeButton tutorial={tutorial}/>\n          <ViewsPanel\n            tutorial={tutorial}\n            onClickHandler={() => this.props.history.push('/metrics/' + tutorial.id + '/' + tutorial.slug )}\n            ownerIsAuthenticatedUser={tutorial.owner_is_authenticated_user} />\n          <ShareButton url={'https://codeilm.com/stories/' + tutorial.id + '/' + tutorial.slug} title={tutorial.title} />\n          {tutorial.owner_is_authenticated_user ?\n            <>\n            <Tooltip title=\"Edit\" aria-label=\"Edit\">\n              <Button\n              size=\"small\"\n              color=\"primary\"\n              className={classes.metricsButton}\n              onClick={() => this.props.history.push(editUrl)}>\n              <MdModeEdit className={classes.iconSmall} />\n              </Button>\n            </Tooltip>\n            </>\n            : null\n          }\n          </>\n        )\n        const linkUrl = \"/stories/?q=\"\n        const content = (<>\n          <div className={classes.chips}>\n          {tutorial.tutorial_tags ? tutorial.tutorial_tags.map(tag => <Chips key={tag.id} link={linkUrl + tag.value} chipsData={{text: tag.label}} />) : null}\n          </div>\n\n          <TutorialInfo user={tutorial.user} />\n          </>)\n        return <MediaCard\n          headerVariant=\"h5\"\n          key={tutorial.id}\n          content={content}\n          onClick={() => this.props.history.push('/stories/' + tutorial.id + '/' + tutorial.slug)}\n          actionButtons={actionButtons}\n          title={tutorial.title} />\n      })}\n      </InfiniteScroll>\n    )\n    return (\n      <>\n        <BasicMetaTags\n          title=\"Stories on Codeilm\"\n        />\n        <Grid container spacing={0}>\n          <Grid item xs={12} lg={9} sm={10}>\n            {this.state.tutorials && this.state.tutorials.length != 0 ?\n              storiesList\n              : !this.state.loading ? (<>\n              <p style={{fontSize: 20, margin: 30}}>Sorry we couldn't find any story with the search query\n                <strong style={{fontSize: 30}}> {this.state.q}</strong>\n              </p>\n              <p style={{fontSize: 20, margin: 30}}>\n                <Link to=\"/stories\">\n                  See all the stories\n                </Link>\n              </p>\n            </>) : null\n          }\n          </Grid>\n          <Grid item lg={3} sm={2}>\n              <div className={classes.coolButton}>\n              {this.state.loading ? null :\n                <CoolButton text=\"Create\" link=\"/create\" />\n              }\n              </div>\n          </Grid>\n        </Grid>\n      </>\n    )\n  }\n}\n\nexport default withErrorHandler(withRouter(withStyles(styles)(TutorialList)), axios, \"list\")\n"]},"metadata":{},"sourceType":"module"}