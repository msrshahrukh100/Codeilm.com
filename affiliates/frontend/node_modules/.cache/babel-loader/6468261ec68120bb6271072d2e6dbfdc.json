{"ast":null,"code":"import _classCallCheck from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/src/containers/TutorialDetail/TutorialDetail.js\";\nimport React from 'react';\nimport axios from '../../lovecodeaxios';\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\nimport DetailPageLayout from '../../components/UI/DetailPageLayout/DetailPageLayout';\nimport VerticalLinearStepper from '../../components/UI/VerticalLinearStepper/VerticalLinearStepper';\nimport TutorialPage from '../../components/TutorialPage/TutorialPage';\nimport Slug from 'slug';\nimport { animateScroll as scroll } from 'react-scroll';\nimport MediaCard from '../../components/UI/MediaCard/MediaCard';\nimport { withStyles } from '@material-ui/core/styles';\nimport getParsedContent from '../../utils/getParsedContent';\nimport ShareButton from '../ShareButton/ShareButton';\nimport LikeButton from '../LikeButton/LikeButton';\nimport ViewsPanel from '../../components/ViewsPanel/ViewsPanel';\nimport TutorialInfo from '../../components/TutorialInfo/TutorialInfo';\nimport ReactGA from 'react-ga';\n\nvar styles = function styles(theme) {\n  return {\n    margin: {\n      margin: theme.spacing(2),\n      marginRight: theme.spacing(3)\n    },\n    metricsButton: {\n      textTransform: 'none',\n      marginLeft: theme.spacing()\n    },\n    iconSmall: {\n      marginRight: theme.spacing(),\n      fontSize: 20\n    }\n  };\n};\n\nvar TutorialDetail =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(TutorialDetail, _React$Component);\n\n  function TutorialDetail(props) {\n    var _this;\n\n    _classCallCheck(this, TutorialDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TutorialDetail).call(this, props));\n\n    _this.setStep = function (step) {\n      _this.props.history.push('/stories/' + _this.state.tutorial.id + '/' + _this.state.tutorial.slug + \"/\" + step + \"/\" + _this.state.slugs[step]);\n\n      scroll.scrollToTop();\n    };\n\n    _this.handleNext = function () {\n      var nextStep = _this.state.activeStep + 1;\n\n      _this.props.history.push('/stories/' + _this.state.tutorial.id + '/' + _this.state.tutorial.slug + \"/\" + nextStep + \"/\" + _this.state.slugs[nextStep]);\n\n      scroll.scrollToTop();\n      ReactGA.event({\n        category: 'User',\n        action: 'Clicked next button on story detail',\n        label: 'NEXT_BUTTON_CLICKED'\n      });\n    };\n\n    _this.handleBack = function () {\n      _this.props.history.goBack();\n\n      scroll.scrollToTop();\n      ReactGA.event({\n        category: 'User',\n        action: 'Clicked back button on story detail',\n        label: 'BACK_BUTTON_CLICKED'\n      });\n    };\n\n    _this.handleReset = function () {\n      var nextStep = 0;\n\n      _this.props.history.push('/stories/' + _this.state.tutorial.id + '/' + _this.state.tutorial.slug + \"/\" + nextStep + \"/\" + _this.state.slugs[nextStep]);\n\n      scroll.scrollToTop();\n      ReactGA.event({\n        category: 'User',\n        action: 'Clicked reset button on story detail',\n        label: 'RESET_BUTTON_CLICKED'\n      });\n    };\n\n    var activeStep = _this.props.match.params.activeStep;\n    _this.state = {\n      tutorial: null,\n      error: null,\n      slugs: null,\n      activeStep: activeStep ? Number(activeStep) : 0\n    };\n    return _this;\n  }\n\n  _createClass(TutorialDetail, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      if (this.props !== prevProps && prevState === this.state) {\n        var activeStep = this.props.match.params.activeStep !== undefined ? Number(this.props.match.params.activeStep) : 0;\n        this.setState({\n          activeStep: activeStep\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var tutorialId = this.props.match.params.tutorialId;\n      axios.get('/tutorials/' + tutorialId).then(function (response) {\n        var parsedContent = getParsedContent(response.data.learn_md_content);\n\n        _this2.setState({\n          tutorial: response.data,\n          parsedTutorial: parsedContent,\n          slugs: parsedContent.data.map(function (item) {\n            return Slug(item.title, {\n              lower: true\n            });\n          }).concat([\"last\"])\n        });\n      }).catch(function (error) {\n        _this2.setState({\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var steps = this.state.parsedTutorial ? this.state.parsedTutorial.data.map(function (tutorial) {\n        return tutorial.title;\n      }) : [];\n      var currentPage = this.state.parsedTutorial ? this.state.parsedTutorial.data[this.state.activeStep] : null;\n      var actionButtons = this.state.tutorial ? React.createElement(React.Fragment, null, React.createElement(LikeButton, {\n        tutorial: this.state.tutorial,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(ViewsPanel, {\n        tutorial: this.state.tutorial,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(ShareButton, {\n        tutorial: this.state.tutorial,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })) : null;\n      var info = this.state.tutorial ? React.createElement(React.Fragment, null, React.createElement(TutorialInfo, {\n        user: this.state.tutorial.user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })) : null;\n      var lastPage = this.state.tutorial ? React.createElement(MediaCard, {\n        onDetailPage: true,\n        elevation: 1,\n        content: info,\n        headerComponent: \"h2\",\n        actionButtons: actionButtons,\n        title: this.state.tutorial.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }) : null;\n      var content = this.state.tutorial ? React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        style: this.state.activeStep !== 0 ? {\n          display: 'none'\n        } : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(MediaCard, {\n        onDetailPage: true,\n        elevation: 1,\n        content: info,\n        headerComponent: \"h1\" // actionButtons={actionButtons}\n        ,\n        title: this.state.tutorial.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(TutorialPage, {\n        lastPage: lastPage,\n        page: currentPage,\n        stepsLength: steps.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      })) : null;\n      var right = steps.length > 1 ? React.createElement(VerticalLinearStepper, {\n        activeStep: this.state.activeStep,\n        handleBack: this.handleBack,\n        handleNext: this.handleNext,\n        handleReset: this.handleReset,\n        setStep: this.setStep,\n        steps: steps,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }) : null;\n      var postTitle = this.state.tutorial ? this.state.tutorial.title : null;\n      return React.createElement(React.Fragment, null, this.state.tutorial ? React.createElement(DetailPageLayout, {\n        left: content,\n        right: right,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }) : null);\n    }\n  }]);\n\n  return TutorialDetail;\n}(React.Component);\n\nexport default withErrorHandler(withStyles(styles)(TutorialDetail), axios, \"circular\");","map":{"version":3,"sources":["/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/src/containers/TutorialDetail/TutorialDetail.js"],"names":["React","axios","withErrorHandler","DetailPageLayout","VerticalLinearStepper","TutorialPage","Slug","animateScroll","scroll","MediaCard","withStyles","getParsedContent","ShareButton","LikeButton","ViewsPanel","TutorialInfo","ReactGA","styles","theme","margin","spacing","marginRight","metricsButton","textTransform","marginLeft","iconSmall","fontSize","TutorialDetail","props","setStep","step","history","push","state","tutorial","id","slug","slugs","scrollToTop","handleNext","nextStep","activeStep","event","category","action","label","handleBack","goBack","handleReset","match","params","error","Number","prevProps","prevState","snapshot","undefined","setState","tutorialId","get","then","response","parsedContent","data","learn_md_content","parsedTutorial","map","item","title","lower","concat","catch","steps","currentPage","actionButtons","info","user","lastPage","content","display","length","right","postTitle","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from '../../lovecodeaxios'\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\nimport DetailPageLayout from '../../components/UI/DetailPageLayout/DetailPageLayout'\nimport VerticalLinearStepper from '../../components/UI/VerticalLinearStepper/VerticalLinearStepper'\nimport TutorialPage from '../../components/TutorialPage/TutorialPage'\nimport Slug from 'slug'\nimport { animateScroll as scroll } from 'react-scroll'\nimport MediaCard from '../../components/UI/MediaCard/MediaCard'\nimport { withStyles } from '@material-ui/core/styles';\nimport getParsedContent from '../../utils/getParsedContent';\nimport ShareButton from '../ShareButton/ShareButton'\nimport LikeButton from '../LikeButton/LikeButton'\nimport ViewsPanel from '../../components/ViewsPanel/ViewsPanel'\nimport TutorialInfo from '../../components/TutorialInfo/TutorialInfo'\nimport ReactGA from 'react-ga';\n\n\nconst styles = theme => ({\n  margin: {\n    margin: theme.spacing(2),\n    marginRight: theme.spacing(3),\n  },\n  metricsButton: {\n    textTransform: 'none',\n    marginLeft: theme.spacing()\n  },\n  iconSmall: {\n    marginRight: theme.spacing(),\n    fontSize: 20,\n  }\n});\n\nclass TutorialDetail extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    const { activeStep } = this.props.match.params;\n    this.state = {\n      tutorial: null,\n      error: null,\n      slugs:null,\n      activeStep: activeStep ? Number(activeStep) : 0\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n\n    if(this.props !== prevProps && prevState === this.state) {\n      let activeStep = this.props.match.params.activeStep !== undefined ?\n        Number(this.props.match.params.activeStep) : 0\n      this.setState({\n        activeStep: activeStep\n      })\n    }\n\n  }\n\n  setStep = (step) => {\n    this.props.history.push('/stories/' + this.state.tutorial.id + '/' + this.state.tutorial.slug + \"/\" + step + \"/\" + this.state.slugs[step])\n    scroll.scrollToTop();\n  }\n\n  handleNext = () => {\n    const nextStep = this.state.activeStep + 1;\n    this.props.history.push('/stories/' + this.state.tutorial.id + '/' + this.state.tutorial.slug + \"/\" + nextStep + \"/\" + this.state.slugs[nextStep])\n    scroll.scrollToTop();\n\n    ReactGA.event({\n      category: 'User',\n      action: 'Clicked next button on story detail',\n      label: 'NEXT_BUTTON_CLICKED',\n    });\n\n  };\n\n  handleBack = () => {\n    this.props.history.goBack()\n    scroll.scrollToTop();\n\n    ReactGA.event({\n      category: 'User',\n      action: 'Clicked back button on story detail',\n      label: 'BACK_BUTTON_CLICKED',\n    });\n\n  };\n\n  handleReset = () => {\n    const nextStep = 0;\n    this.props.history.push('/stories/' + this.state.tutorial.id + '/' + this.state.tutorial.slug + \"/\" + nextStep + \"/\" + this.state.slugs[nextStep])\n    scroll.scrollToTop();\n\n    ReactGA.event({\n      category: 'User',\n      action: 'Clicked reset button on story detail',\n      label: 'RESET_BUTTON_CLICKED',\n    });\n\n\n  };\n\n\n  componentDidMount() {\n    const { tutorialId } = this.props.match.params\n\n    axios.get('/tutorials/' + tutorialId)\n      .then(response => {\n        const parsedContent = getParsedContent(response.data.learn_md_content)\n        this.setState({\n          tutorial: response.data,\n          parsedTutorial: parsedContent,\n          slugs: parsedContent.data.map(item => Slug(item.title, {lower: true})).concat([\"last\"]),\n        })\n      })\n      .catch(error => {\n        this.setState({\n          error: error,\n        })\n      })\n  }\n\n\n  render() {\n    const steps = this.state.parsedTutorial ?\n      this.state.parsedTutorial.data.map(tutorial => tutorial.title)\n      : [];\n    const currentPage = this.state.parsedTutorial ?\n      this.state.parsedTutorial.data[this.state.activeStep]\n      : null;\n    const actionButtons = this.state.tutorial ? (\n      <>\n      <LikeButton tutorial={this.state.tutorial}/>\n      <ViewsPanel tutorial={this.state.tutorial} />\n      <ShareButton tutorial={this.state.tutorial} />\n      </>\n    ) : null\n    const info = this.state.tutorial ? (<>\n      <TutorialInfo user={this.state.tutorial.user} />\n      </>) : null\n    const lastPage = this.state.tutorial ? (\n      <MediaCard\n        onDetailPage={true}\n        elevation={1}\n        content={info}\n        headerComponent=\"h2\"\n        actionButtons={actionButtons}\n        title={this.state.tutorial.title} />\n    ) : null\n\n    const content = this.state.tutorial ?\n      <>\n      <div style={this.state.activeStep !== 0 ? {display: 'none'} : null}>\n      <MediaCard\n        onDetailPage={true}\n        elevation={1}\n        content={info}\n        headerComponent=\"h1\"\n        // actionButtons={actionButtons}\n        title={this.state.tutorial.title} />\n        </div>\n        <TutorialPage lastPage={lastPage} page={currentPage} stepsLength={steps.length} />\n      </>\n      : null\n    const right = steps.length > 1 ? (<VerticalLinearStepper\n      activeStep={this.state.activeStep}\n      handleBack={this.handleBack}\n      handleNext={this.handleNext}\n      handleReset={this.handleReset}\n      setStep={this.setStep}\n      steps={steps} />) : null;\n\n    const postTitle = this.state.tutorial ? this.state.tutorial.title : null\n    return (\n      <>\n        {this.state.tutorial ?\n          <DetailPageLayout\n            left={content}\n            right={right}\n            />\n          : null\n        }\n      </>\n    )\n  }\n}\n\nexport default withErrorHandler(withStyles(styles)(TutorialDetail), axios, \"circular\")\n"]},"metadata":{},"sourceType":"module"}