{"ast":null,"code":"import _classCallCheck from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/src/hoc/withErrorHandler/withErrorHandler.js\";\nimport React from 'react';\nimport Snackbar from '../../components/UI/Snackbar/Snackbar';\nimport PageLayout from '../../components/UI/PageLayout/PageLayout';\nimport DetailPageSkeleton from '../../components/UI/SkeletonLoaders/DetailPageSkeleton';\nimport ListPageSkeleton from '../../components/UI/SkeletonLoaders/ListPageSkeleton';\nimport DetailPageLayout from '../../components/UI/DetailPageLayout/DetailPageLayout';\nimport LinearPreloader from '../../components/UI/SkeletonLoaders/LinearPreloader';\nimport { withRouter } from \"react-router\";\n\nvar withErrorHandler = function withErrorHandler(WrappedCompenent, axios, type) {\n  var Cmp =\n  /*#__PURE__*/\n  function (_React$Component) {\n    _inherits(Cmp, _React$Component);\n\n    function Cmp() {\n      var _getPrototypeOf2;\n\n      var _this;\n\n      _classCallCheck(this, Cmp);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Cmp)).call.apply(_getPrototypeOf2, [this].concat(args)));\n      _this.state = {\n        error: null,\n        loading: null\n      };\n\n      _this.hideErrorHandler = function () {\n        _this.setState({\n          error: null\n        });\n      };\n\n      return _this;\n    }\n\n    _createClass(Cmp, [{\n      key: \"componentWillMount\",\n      value: function componentWillMount() {\n        var _this2 = this;\n\n        this.reqInterceptor = axios.interceptors.request.use(function (request) {\n          _this2.setState({\n            error: null,\n            loading: true\n          });\n\n          return request;\n        }, function (error) {\n          _this2.setState({\n            error: error,\n            loading: false\n          });\n        });\n        this.resInterceptor = axios.interceptors.response.use(function (response) {\n          _this2.setState({\n            loading: false\n          });\n\n          return response;\n        }, function (error) {\n          if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n            _this2.props.history.push(\"/login/?next=\" + _this2.props.match.path);\n          } else {\n            _this2.setState({\n              error: error,\n              loading: false\n            });\n          }\n        });\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        axios.interceptors.request.eject(this.reqInterceptor);\n        axios.interceptors.response.eject(this.resInterceptor);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var skeleton = React.createElement(DetailPageLayout, {\n          left: React.createElement(PageLayout, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }, React.createElement(DetailPageSkeleton, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          })),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        });\n\n        if (type == \"list\") {\n          skeleton = React.createElement(ListPageSkeleton, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59\n            },\n            __self: this\n          });\n        } else if (type == \"circular\") {\n          skeleton = React.createElement(LinearPreloader, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62\n            },\n            __self: this\n          });\n        } else if (type == \"detail\") {\n          skeleton = React.createElement(DetailPageSkeleton, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 65\n            },\n            __self: this\n          });\n        } else {\n          skeleton = null;\n        }\n\n        return React.createElement(React.Fragment, null, skeleton ? this.state.loading ? skeleton : null : null, this.state.error ? this.state.error.message : null, this.state.error ? React.createElement(Snackbar, {\n          open: true,\n          type: \"error\",\n          text: this.state.error.message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }) : null, !this.state.error ? React.createElement(WrappedCompenent, Object.assign({}, this.props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        })) : null);\n      }\n    }]);\n\n    return Cmp;\n  }(React.Component);\n\n  return withRouter(Cmp);\n};\n\nexport default withErrorHandler;","map":{"version":3,"sources":["/home/shahrukh/Code/projects/allywith/Codeilm.com/affiliates/frontend/src/hoc/withErrorHandler/withErrorHandler.js"],"names":["React","Snackbar","PageLayout","DetailPageSkeleton","ListPageSkeleton","DetailPageLayout","LinearPreloader","withRouter","withErrorHandler","WrappedCompenent","axios","type","Cmp","state","error","loading","hideErrorHandler","setState","reqInterceptor","interceptors","request","use","resInterceptor","response","status","props","history","push","match","path","eject","skeleton","message","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,uCAArB;AACA,OAAOC,UAAP,MAAuB,2CAAvB;AACA,OAAOC,kBAAP,MAA+B,wDAA/B;AACA,OAAOC,gBAAP,MAA6B,sDAA7B;AACA,OAAOC,gBAAP,MAA6B,uDAA7B;AACA,OAAOC,eAAP,MAA4B,qDAA5B;AACA,SAASC,UAAT,QAA2B,cAA3B;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,gBAAD,EAAmBC,KAAnB,EAA0BC,IAA1B,EAAmC;AAAA,MACpDC,GADoD;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,YAExDC,KAFwD,GAEhD;AACNC,QAAAA,KAAK,EAAE,IADD;AAENC,QAAAA,OAAO,EAAE;AAFH,OAFgD;;AAAA,YAwCxDC,gBAxCwD,GAwCrC,YAAM;AACvB,cAAKC,QAAL,CAAc;AACZH,UAAAA,KAAK,EAAE;AADK,SAAd;AAGD,OA5CuD;;AAAA;AAAA;;AAAA;AAAA;AAAA,2CAOnC;AAAA;;AACnB,aAAKI,cAAL,GAAsBR,KAAK,CAACS,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAD,OAAO,EAAI;AAC9D,UAAA,MAAI,CAACH,QAAL,CAAc;AAACH,YAAAA,KAAK,EAAE,IAAR;AAAcC,YAAAA,OAAO,EAAE;AAAvB,WAAd;;AACA,iBAAOK,OAAP;AACD,SAHqB,EAGnB,UAAAN,KAAK,EAAI;AACV,UAAA,MAAI,CAACG,QAAL,CAAc;AACZH,YAAAA,KAAK,EAAEA,KADK;AAEZC,YAAAA,OAAO,EAAE;AAFG,WAAd;AAID,SARqB,CAAtB;AAUA,aAAKO,cAAL,GAAsBZ,KAAK,CAACS,YAAN,CAAmBI,QAAnB,CAA4BF,GAA5B,CAAgC,UAAAE,QAAQ,EAAI;AAChE,UAAA,MAAI,CAACN,QAAL,CAAc;AAACF,YAAAA,OAAO,EAAE;AAAV,WAAd;;AACA,iBAAOQ,QAAP;AACD,SAHqB,EAGnB,UAAAT,KAAK,EAAI;AACV,cAAIA,KAAK,CAACS,QAAN,KAAmBT,KAAK,CAACS,QAAN,CAAeC,MAAf,KAA0B,GAA1B,IAAiCV,KAAK,CAACS,QAAN,CAAeC,MAAf,KAA0B,GAA9E,CAAJ,EAAwF;AACtF,YAAA,MAAI,CAACC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,kBAAkB,MAAI,CAACF,KAAL,CAAWG,KAAX,CAAiBC,IAA3D;AACD,WAFD,MAGK;AACH,YAAA,MAAI,CAACZ,QAAL,CAAc;AACZH,cAAAA,KAAK,EAAEA,KADK;AAEZC,cAAAA,OAAO,EAAE;AAFG,aAAd;AAID;AAEF,SAdqB,CAAtB;AAeD;AAjCuD;AAAA;AAAA,6CAmCjC;AACrBL,QAAAA,KAAK,CAACS,YAAN,CAAmBC,OAAnB,CAA2BU,KAA3B,CAAiC,KAAKZ,cAAtC;AACAR,QAAAA,KAAK,CAACS,YAAN,CAAmBI,QAAnB,CAA4BO,KAA5B,CAAkC,KAAKR,cAAvC;AACD;AAtCuD;AAAA;AAAA,+BA8C/C;AACP,YAAIS,QAAQ,GAAI,oBAAC,gBAAD;AAAkB,UAAA,IAAI,EAAC,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAY,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAZ,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAhB;;AACA,YAAGpB,IAAI,IAAI,MAAX,EAAmB;AACjBoB,UAAAA,QAAQ,GAAI,oBAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAZ;AACD,SAFD,MAGK,IAAGpB,IAAI,IAAI,UAAX,EAAuB;AAC1BoB,UAAAA,QAAQ,GAAG,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAX;AACD,SAFI,MAGA,IAAGpB,IAAI,IAAI,QAAX,EAAqB;AACxBoB,UAAAA,QAAQ,GAAG,oBAAC,kBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAX;AACD,SAFI,MAGA;AACHA,UAAAA,QAAQ,GAAG,IAAX;AACD;;AACD,eACE,0CAEKA,QAAQ,GAAG,KAAKlB,KAAL,CAAWE,OAAX,GAAsBgB,QAAtB,GAAgC,IAAnC,GAA0C,IAFvD,EAGK,KAAKlB,KAAL,CAAWC,KAAX,GAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBkB,OAApC,GAA8C,IAHnD,EAIK,KAAKnB,KAAL,CAAWC,KAAX,GAAmB,oBAAC,QAAD;AAAU,UAAA,IAAI,EAAE,IAAhB;AAAsB,UAAA,IAAI,EAAC,OAA3B;AAAmC,UAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,KAAX,CAAiBkB,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAnB,GAA2F,IAJhG,EAKG,CAAC,KAAKnB,KAAL,CAAWC,KAAZ,GAAoB,oBAAC,gBAAD,oBAAsB,KAAKW,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAApB,GAA2D,IAL9D,CADF;AASD;AArEuD;;AAAA;AAAA,IACxCzB,KAAK,CAACiC,SADkC;;AAwE1D,SAAO1B,UAAU,CAACK,GAAD,CAAjB;AACD,CAzED;;AA4EA,eAAeJ,gBAAf","sourcesContent":["import React from 'react'\nimport Snackbar from '../../components/UI/Snackbar/Snackbar'\nimport PageLayout from '../../components/UI/PageLayout/PageLayout'\nimport DetailPageSkeleton from '../../components/UI/SkeletonLoaders/DetailPageSkeleton'\nimport ListPageSkeleton from '../../components/UI/SkeletonLoaders/ListPageSkeleton'\nimport DetailPageLayout from '../../components/UI/DetailPageLayout/DetailPageLayout'\nimport LinearPreloader from '../../components/UI/SkeletonLoaders/LinearPreloader'\nimport { withRouter } from \"react-router\";\n\nconst withErrorHandler = (WrappedCompenent, axios, type) => {\n  class Cmp extends React.Component {\n    state = {\n      error: null,\n      loading: null\n    }\n\n    componentWillMount() {\n      this.reqInterceptor = axios.interceptors.request.use(request => {\n        this.setState({error: null, loading: true})\n        return request\n      }, error => {\n        this.setState({\n          error: error,\n          loading: false\n        })\n      })\n\n      this.resInterceptor = axios.interceptors.response.use(response => {\n        this.setState({loading: false})\n        return response\n      }, error => {\n        if (error.response && (error.response.status === 401 || error.response.status === 403)) {\n          this.props.history.push(\"/login/?next=\" + this.props.match.path)\n        }\n        else {\n          this.setState({\n            error: error,\n            loading: false\n          })\n        }\n\n      })\n    }\n\n    componentWillUnmount() {\n      axios.interceptors.request.eject(this.reqInterceptor)\n      axios.interceptors.response.eject(this.resInterceptor)\n    }\n\n    hideErrorHandler = () => {\n      this.setState({\n        error: null,\n      })\n    }\n\n    render() {\n      let skeleton = (<DetailPageLayout left=<PageLayout><DetailPageSkeleton /></PageLayout> />)\n      if(type == \"list\") {\n        skeleton = (<ListPageSkeleton />)\n      }\n      else if(type == \"circular\") {\n        skeleton = <LinearPreloader />\n      }\n      else if(type == \"detail\") {\n        skeleton = <DetailPageSkeleton />\n      }\n      else {\n        skeleton = null\n      }\n      return (\n        <>\n\n            {skeleton ? this.state.loading ?  skeleton: null : null}\n            {this.state.error ? this.state.error.message : null}\n            {this.state.error ? <Snackbar open={true} type=\"error\" text={this.state.error.message} /> : null}\n          {!this.state.error ? <WrappedCompenent {...this.props} /> : null}\n        </>\n      )\n    }\n  }\n\n  return withRouter(Cmp)\n}\n\n\nexport default withErrorHandler\n"]},"metadata":{},"sourceType":"module"}