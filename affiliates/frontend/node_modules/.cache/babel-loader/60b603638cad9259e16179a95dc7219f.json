{"ast":null,"code":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"../yaml/yaml\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"../yaml/yaml\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  var START = 0,\n      FRONTMATTER = 1,\n      BODY = 2; // a mixed mode for Markdown text with an optional YAML front matter\n\n  CodeMirror.defineMode(\"yaml-frontmatter\", function (config, parserConfig) {\n    var yamlMode = CodeMirror.getMode(config, \"yaml\");\n    var innerMode = CodeMirror.getMode(config, parserConfig && parserConfig.base || \"gfm\");\n\n    function curMode(state) {\n      return state.state == BODY ? innerMode : yamlMode;\n    }\n\n    return {\n      startState: function startState() {\n        return {\n          state: START,\n          inner: CodeMirror.startState(yamlMode)\n        };\n      },\n      copyState: function copyState(state) {\n        return {\n          state: state.state,\n          inner: CodeMirror.copyState(curMode(state), state.inner)\n        };\n      },\n      token: function token(stream, state) {\n        if (state.state == START) {\n          if (stream.match(/---/, false)) {\n            state.state = FRONTMATTER;\n            return yamlMode.token(stream, state.inner);\n          } else {\n            state.state = BODY;\n            state.inner = CodeMirror.startState(innerMode);\n            return innerMode.token(stream, state.inner);\n          }\n        } else if (state.state == FRONTMATTER) {\n          var end = stream.sol() && stream.match(/---/, false);\n          var style = yamlMode.token(stream, state.inner);\n\n          if (end) {\n            state.state = BODY;\n            state.inner = CodeMirror.startState(innerMode);\n          }\n\n          return style;\n        } else {\n          return innerMode.token(stream, state.inner);\n        }\n      },\n      innerMode: function innerMode(state) {\n        return {\n          mode: curMode(state),\n          state: state.inner\n        };\n      },\n      blankLine: function blankLine(state) {\n        var mode = curMode(state);\n        if (mode.blankLine) return mode.blankLine(state.inner);\n      }\n    };\n  });\n});","map":null,"metadata":{},"sourceType":"script"}