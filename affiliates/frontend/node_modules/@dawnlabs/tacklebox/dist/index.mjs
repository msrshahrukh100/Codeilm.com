import n from"copy-to-clipboard";import t from"react-click-outside";import e from"react-fast-compare";import r from"react";const o=function(){function n(){}return n.prototype.then=function(t,e){const r=new n,o=this.s;if(o){const n=1&o?t:e;if(n){try{u(r,1,n(this.v))}catch(n){u(r,2,n)}return r}return this}return this.o=function(n){try{const o=n.v;1&n.s?u(r,1,t?t(o):o):e?u(r,1,e(o)):u(r,2,o)}catch(n){u(r,2,n)}},r},n}();function u(n,t,e){if(!n.s){if(e instanceof o){if(!e.s)return void(e.o=u.bind(null,n,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(u.bind(null,n,t),u.bind(null,n,2));n.s=t,n.v=e;const r=n.o;r&&r(n)}}const i={};!function(){function n(n){this._entry=n,this._pact=null,this._resolve=null,this._return=null,this._promise=null}function t(n){return{value:n,done:!0}}function e(n){return{value:n,done:!1}}n.prototype[Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))]=function(){return this},n.prototype._yield=function(n){return this._resolve(n&&n.then?n.then(e):e(n)),this._pact=new o},n.prototype.next=function(n){const e=this;return e._promise=new Promise(function(r){const c=e._pact;if(null===c){const n=e._entry;if(null===n)return r(e._promise);function l(n){e._resolve(n&&n.then?n.then(t):t(n)),e._pact=null,e._resolve=null}e._entry=null,e._resolve=r,n(e).then(l,function(n){if(n===i)l(e._return);else{const t=new o;e._resolve(t),e._pact=null,e._resolve=null,_resolve(t,2,n)}})}else e._pact=null,e._resolve=r,u(c,1,n)})},n.prototype.return=function(n){const e=this;return e._promise=new Promise(function(r){const o=e._pact;if(null===o)return null===e._entry?r(e._promise):(e._entry=null,r(n&&n.then?n.then(t):t(n)));e._return=n,e._resolve=r,e._pact=null,u(o,2,i)})},n.prototype.throw=function(n){const t=this;return t._promise=new Promise(function(e,r){const o=t._pact;if(null===o)return null===t._entry?e(t._promise):(t._entry=null,r(n));t._resolve=e,t._pact=null,u(o,2,n)})}}();function c(n){var t=r.useState(null),e=t[0],o=t[1],u=r.useState(null),i=u[0],c=u[1],l=r.useState(null),a=l[0],s=l[1];return[r.useCallback(function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return o(!0),c(null),Promise.resolve(function(n,t){try{var e=n()}catch(n){return t(!0,n)}return e&&e.then?e.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}(function(){return function(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}(function(){return Promise.resolve(n.apply(void 0,t)).then(function(n){return s(n),n})},function(n){c(n)})},function(n,t){if(o(!1),n)throw t;return t}))}catch(n){return Promise.reject(n)}},[n]),{data:a,loading:e,error:i}]}var l=r.memo(function(n){var t=c(n.onClick),e=t[1];return n.children({data:e.data,loading:e.loading,error:e.error,onClick:t[0]})}),a=function(n){return new Promise(function(t){return setTimeout(t,n)})};function s(t,e){void 0===e&&(e={});var r=e.interval,o=c(function(){try{n(t);var e=function(){if(0!==r)return Promise.resolve(a(null==r?1e3:r)).then(function(){})}();return Promise.resolve(e&&e.then?e.then(function(){}):void 0)}catch(n){return Promise.reject(n)}});return{onClick:o[0],copied:o[1].loading}}var f=r.memo(function(n){return n.children(s(n.text,{interval:n.interval}))}),v=function(n,t){return r.useEffect(function(){return document.addEventListener(n,t,!1),function(){return document.removeEventListener(n,t,!1)}})},p=function(n,t){var e=r.useCallback(function(e){if(e.key===n)return t(e)},[n,t]);v("keydown",e)},h=t(function(n){function t(){n.apply(this,arguments)}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t,t.prototype.handleClickOutside=function(n){this.props.onClickAway(n)},t.prototype.render=function(){return this.props.children},t}(r.PureComponent)),m=r.memo(function(n){return p("Escape",n.onClickAway),r.createElement(h,{onClickAway:n.onClickAway},n.open?n.children:null)});function d(n,t){void 0===t&&(t={});var o=t.onSubmit,u=t.onReset,i=r.useState(n),l=i[0],a=i[1],s=r.useState(n),f=s[0],v=s[1],p=!r.useMemo(function(){return e(f,l)},[f,l]),h=r.useCallback(function(n){return a(n.target.value)},[a]),m=c(function(){try{function n(){v(l)}var t=function(){if(o)return Promise.resolve(o(l)).then(function(){})}();return Promise.resolve(t&&t.then?t.then(n):n())}catch(n){return Promise.reject(n)}}),d=m[1];return{value:l,hasChanged:p,data:d.data,loading:d.loading,error:d.error,onChange:a,onInputChange:h,reset:function(){u&&u(l),a(f)},submit:m[0]}}m.displayName="Modal";var y=r.memo(function(n){var t=d(n.initialValue,n);return n.children(t)});function _(){}y.defaultProps={onReset:_,onSubmit:_};var w=function(n){return"string"==typeof n?n:JSON.stringify(n)},g=function(n){try{return JSON.parse(n)}catch(t){return n}};function S(n){var t=r.useState(null),e=t[0],o=t[1];return r.useEffect(function(){if(localStorage.hasOwnProperty(n)){var t=localStorage.getItem(n);o(g(t))}},[n]),r.useEffect(function(){function n(n){n.isTrusted&&o(n.newValue)}return window.addEventListener("storage",n),function(){return window.removeEventListener("storage",n)}},[]),r.useEffect(function(){null==e?localStorage.removeItem(n):localStorage.setItem(n,w(e))},[n,e]),[e,o]}function b(n,t){var e=r.useRef(t);r.useEffect(function(){var t=e.current;return window.addEventListener(n,t),function(){return window.removeEventListener(n,t)}},[n])}function P(){var n=r.useState(!0),t=n[0],e=n[1];return r.useEffect(function(){e("undefined"==typeof navigator||"boolean"!=typeof navigator.onLine||navigator.onLine)},[]),b("offline",function(){return e(!1)}),b("online",function(){return e(!0)}),t}export{c as useAsyncCallback,l as AsyncButton,s as useCopyTextHandler,f as CopyButton,v as useEventListener,p as useKeyboardListener,m as Modal,d as useTempValue,y as TempValue,S as useLocalStorage,P as useOnline};
//# sourceMappingURL=index.mjs.map
