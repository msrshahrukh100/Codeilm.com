{"version":3,"sources":["containers/CreateTutorial/CreateTutorial.js"],"names":["CreateTutorial","props","_this","Object","_home_shahrukh_Code_projects_allywith_Allywith_com_lovecode_lovecodefrontend_lovecode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_shahrukh_Code_projects_allywith_Allywith_com_lovecode_lovecodefrontend_lovecode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_shahrukh_Code_projects_allywith_Allywith_com_lovecode_lovecodefrontend_lovecode_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","getBranchName","query","URLSearchParams","location","search","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","param","value","err","return","titleUpdate","event","setState","title","target","emptyError","error","createTutorial","prevState","loading","state","csrftoken","getCookie","repoName","match","params","branchName","postData","branch_name","repo_name","repo_data","repoData","axios","defaults","headers","common","post","then","response","data","created","tutorial_data","repository_name","history","push","id","slug","catch","console","log","tutorials","_this2","get","classes","results","map","tutorial","index","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_components_UI_MediaCard_MediaCard__WEBPACK_IMPORTED_MODULE_15__","key","link","content","_components_TutorialInfo_TutorialInfo__WEBPACK_IMPORTED_MODULE_16__","user","Fragment","className","container","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9__","label","onChange","textField","margin","variant","style","color","paddingLeft","_material_ui_core_Fab__WEBPACK_IMPORTED_MODULE_11__","onClick","disabled","size","aria-label","react_icons__WEBPACK_IMPORTED_MODULE_13__","Provider","react_icons_md__WEBPACK_IMPORTED_MODULE_12__","extendedIcon","length","React","Component","withErrorHandler","withStyles","theme","width","spacing","repoField","minWidth","position","top","textTransform","marginRight","withRouter","connect","rdReducer"],"mappings":"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","file":"static/js/14.267aae6e.chunk.js","sourcesContent":["import React from 'react'\nimport axios from '../../lovecodeaxios'\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport { withRouter } from \"react-router\";\nimport Fab from '@material-ui/core/Fab';\nimport { MdGrade } from 'react-icons/md';\nimport { IconContext } from \"react-icons\";\nimport getCookie from '../../utils/getCookie'\nimport MediaCard from '../../components/UI/MediaCard/MediaCard'\nimport TutorialInfo from '../../components/TutorialInfo/TutorialInfo'\nimport { connect } from 'react-redux'\n\nconst styles = theme => ({\n  textField: {\n    width: '95%',\n    margin: theme.spacing()\n  },\n  repoField: {\n    minWidth: 120,\n    margin: theme.spacing()\n  },\n  container: {\n    position: 'absolute',\n    top: '90px',\n    width: '95%'\n  },\n  margin: {\n    margin: theme.spacing(),\n    textTransform: 'none'\n  },\n  extendedIcon: {\n    marginRight: theme.spacing(),\n  }\n});\n\nclass CreateTutorial extends React.Component {\n\n  getBranchName = (props) => {\n    const query = new URLSearchParams( props.location.search );\n    for ( let param of query.entries() ) {\n      if (param[0] === 'branch_name') {\n        return param[1];\n      }\n    }\n    return null\n  }\n\n  constructor(props) {\n\n    super(props)\n    const { repoName } = props.match.params;\n    const branchName = this.getBranchName(props);\n\n    this.state = {\n      title: \"\",\n      error: null,\n      emptyError: false,\n      tutorials: null,\n      repoName: repoName,\n      branchName: branchName\n    }\n  }\n\n  titleUpdate = event => {\n    this.setState({\n      title: event.target.value,\n      emptyError: event.target.value === \"\" ? true : false,\n      error: null,\n    })\n  }\n\n  componentDidMount() {\n\n    if(this.state.repoName && this.state.branchName) {\n      axios.get('/tutorials/?repo_name=' + this.state.repoName + \"&branch_name=\" + this.state.branchName + \"&repo_create=true\")\n      .then(response => {\n        this.setState({\n          tutorials: response.data\n        })\n      })\n      .catch(error => {\n        console.log(error)\n        this.setState({\n          error: error,\n          loading: false\n        })\n      })\n    }\n  }\n\n  createTutorial = () => {\n    this.setState((prevState, props) => {\n      return {\n        loading: prevState.title === \"\" ? false: true,\n        emptyError: prevState.title === \"\" ? true: false,\n        error: prevState.title === \"\" ? \"Title can't be blank\": null\n      }\n    })\n    if(this.state.title !== \"\") {\n      const csrftoken = getCookie('csrftoken');\n      const { repoName } = this.props.match.params;\n      const branchName = this.getBranchName(this.props)\n      const postData = {\n        title: this.state.title,\n        branch_name: branchName,\n        repo_name: repoName,\n        repo_data: this.props.repoData\n      };\n      axios.defaults.headers.common['X-CSRFToken'] = csrftoken;\n      axios.post('/tutorials/create_or_get', postData)\n      .then(response => {\n        const data = response.data;\n        if(data.created) {\n          this.setState({loading: false})\n          if(data.tutorial_data.repository_name) {\n            this.props.history.push(\"/create/\" + repoName + \"/\" + data.tutorial_data.id + \"/\" + data.tutorial_data.slug + \"/\" + branchName)\n          }\n          else {\n            this.props.history.push(\"/create/new/\" + data.tutorial_data.id + \"/\" + data.tutorial_data.slug)\n          }\n        }\n        else {\n          this.setState({loading: false, emptyError: true, error: \"A story with this name already exists\"})\n        }\n\n      })\n      .catch(error => {\n        console.log(error);\n        this.setState({\n          error: error,\n        })\n      })\n\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { repoName } = this.props.match.params;\n    const branchName = this.getBranchName(this.props)\n    const tutorials = this.state.tutorials ?\n    this.state.tutorials.results.map((tutorial, index) => {\n      return <MediaCard\n        key={tutorial.id}\n        link={\"/create/\" + repoName + \"/\" + tutorial.id + \"/\" + tutorial.slug + \"/\" + branchName}\n        content=<TutorialInfo user={tutorial.user} />\n        title={tutorial.title} />\n    })\n     : null;\n    return (\n      <>\n\n      <div className={classes.container}>\n      <>\n        <TextField\n          error={this.state.emptyError}\n          id=\"outlined-name\"\n          label=\"Title of your story\"\n          value={this.state.title}\n          onChange={this.titleUpdate}\n          className={classes.textField}\n          margin=\"normal\"\n          variant=\"outlined\"\n        />\n        <p style={{color: 'red', paddingLeft: '10px'}}>{this.state.error}</p>\n\n        <Fab\n          variant=\"extended\"\n          onClick={this.createTutorial}\n          disabled={this.state.loading}\n          size=\"medium\"\n          color=\"primary\"\n          aria-label=\"Add\"\n          className={classes.margin}\n        >\n          <IconContext.Provider value={{ size: '2em' }}>\n          <MdGrade className={classes.extendedIcon} />\n          </IconContext.Provider>\n          Create your Story\n        </Fab>\n        </>\n\n        {tutorials ?\n            tutorials.length > 0 ?\n              <>\n              <h4 className={classes.margin}>Stories with this branch and repo</h4>\n              {tutorials}\n              </>\n              : null\n        : null}\n\n        </div>\n      </>\n    )\n  }\n}\n\nconst connectStateToProps = state => {\n  return {\n    repoData: state.rdReducer.repoData\n  }\n}\n\nexport default withErrorHandler(withStyles(styles)(withRouter(connect(connectStateToProps, null)(CreateTutorial))), axios, \"circular\")\n"],"sourceRoot":""}