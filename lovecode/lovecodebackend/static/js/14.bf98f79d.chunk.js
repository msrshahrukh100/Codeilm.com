(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{990:function(t,e,a){"use strict";a.r(e);var r=a(40),n=a(41),i=a(43),o=a(42),l=a(44),s=a(1),c=a.n(s),u=a(81),m=a(89),p=a(6),h=a(996),d=a(31),g=a(624),f=a(62),b=a(0),y=a(149),v=a(74),N=a(156),E=a(68),_=function(t){function e(t){var a;Object(r.a)(this,e),(a=Object(i.a)(this,Object(o.a)(e).call(this,t))).getBranchName=function(t){var e=new URLSearchParams(t.location.search),a=!0,r=!1,n=void 0;try{for(var i,o=e.entries()[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var l=i.value;if("branch_name"===l[0])return l[1]}}catch(s){r=!0,n=s}finally{try{a||null==o.return||o.return()}finally{if(r)throw n}}return null},a.titleUpdate=function(t){a.setState({title:t.target.value,emptyError:""===t.target.value,error:null})},a.createTutorial=function(){if(a.setState(function(t,e){return{loading:""!==t.title,emptyError:""===t.title,error:""===t.title?"Title can't be blank":null}}),""!==a.state.title){var t=Object(y.a)("csrftoken"),e=a.props.match.params.repoName,r=a.getBranchName(a.props),n={title:a.state.title,branch_name:r,repo_name:e,repo_data:a.props.repoData};u.a.defaults.headers.common["X-CSRFToken"]=t,u.a.post("/tutorials/create_or_get",n).then(function(t){var n=t.data;n.created?(a.setState({loading:!1}),n.tutorial_data.repository_name?a.props.history.push("/create/"+e+"/"+n.tutorial_data.id+"/"+n.tutorial_data.slug+"/"+r):a.props.history.push("/create/new/"+n.tutorial_data.id+"/"+n.tutorial_data.slug)):a.setState({loading:!1,emptyError:!0,error:"A story with this name already exists"})}).catch(function(t){console.log(t),a.setState({error:t})})}};var n=t.match.params.repoName,l=a.getBranchName(t);return a.state={title:"",error:null,emptyError:!1,tutorials:null,repoName:n,branchName:l},a}return Object(l.a)(e,t),Object(n.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.state.repoName&&this.state.branchName&&u.a.get("/tutorials/?repo_name="+this.state.repoName+"&branch_name="+this.state.branchName+"&repo_create=true").then(function(e){t.setState({tutorials:e.data})}).catch(function(e){console.log(e),t.setState({error:e,loading:!1})})}},{key:"render",value:function(){var t=this.props.classes,e=this.props.match.params.repoName,a=this.getBranchName(this.props),r=this.state.tutorials?this.state.tutorials.results.map(function(t,r){return c.a.createElement(v.a,{key:t.id,link:"/create/"+e+"/"+t.id+"/"+t.slug+"/"+a,content:c.a.createElement(N.a,{user:t.user}),title:t.title})}):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:t.container},c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,{error:this.state.emptyError,id:"outlined-name",label:"Title of your story",value:this.state.title,onChange:this.titleUpdate,className:t.textField,margin:"normal",variant:"outlined"}),c.a.createElement("p",{style:{color:"red",paddingLeft:"10px"}},this.state.error),c.a.createElement(g.a,{variant:"extended",onClick:this.createTutorial,disabled:this.state.loading,size:"medium",color:"primary","aria-label":"Add",className:t.margin},c.a.createElement(b.b.Provider,{value:{size:"2em"}},c.a.createElement(f.a,{className:t.extendedIcon})),"Create your Story")),r&&r.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("h4",{className:t.margin},"Stories with this branch and repo"),r):null))}}]),e}(c.a.Component);e.default=Object(m.a)(Object(p.a)(function(t){return{textField:{width:"95%",margin:t.spacing.unit},repoField:{minWidth:120,margin:t.spacing.unit},container:{position:"absolute",top:"90px",width:"95%"},margin:{margin:t.spacing.unit,textTransform:"none"},extendedIcon:{marginRight:t.spacing.unit}}})(Object(d.f)(Object(E.b)(function(t){return{repoData:t.rdReducer.repoData}},null)(_))),u.a,"circular")}}]);
//# sourceMappingURL=14.bf98f79d.chunk.js.map