{"version":3,"sources":["containers/CreateTutorial/CreateTutorial.js"],"names":["CreateTutorial","state","title","error","emptyError","tutorials","titleUpdate","event","_this","setState","target","value","getBranchName","props","query","URLSearchParams","location","search","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","param","err","return","createTutorial","prevState","loading","csrftoken","getCookie","repoName","match","params","branchName","postData","branch_name","repo_name","repo_data","repoData","axios","defaults","headers","common","post","then","response","data","created","history","push","tutorial_data","id","slug","catch","console","log","_this2","this","get","classes","results","map","tutorial","index","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_components_UI_MediaCard_MediaCard__WEBPACK_IMPORTED_MODULE_15__","key","link","content","_components_TutorialInfo_TutorialInfo__WEBPACK_IMPORTED_MODULE_16__","user","Fragment","className","container","_material_ui_core_TextField__WEBPACK_IMPORTED_MODULE_9__","label","onChange","textField","margin","variant","_material_ui_core_Fab__WEBPACK_IMPORTED_MODULE_11__","onClick","disabled","size","color","aria-label","react_icons__WEBPACK_IMPORTED_MODULE_13__","Provider","react_icons_md__WEBPACK_IMPORTED_MODULE_12__","extendedIcon","React","Component","withErrorHandler","withStyles","theme","width","spacing","unit","repoField","minWidth","position","top","textTransform","marginRight","withRouter","connect","rdReducer"],"mappings":"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","file":"static/js/14.9e0ae8b4.chunk.js","sourcesContent":["import React from 'react'\nimport axios from '../../lovecodeaxios'\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler'\nimport { withStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport { withRouter } from \"react-router\";\nimport Fab from '@material-ui/core/Fab';\nimport { MdGrade } from 'react-icons/md';\nimport { IconContext } from \"react-icons\";\nimport getCookie from '../../utils/getCookie'\nimport MediaCard from '../../components/UI/MediaCard/MediaCard'\nimport TutorialInfo from '../../components/TutorialInfo/TutorialInfo'\nimport { connect } from 'react-redux'\n\nconst styles = theme => ({\n  textField: {\n    width: '95%',\n    margin: theme.spacing.unit\n  },\n  repoField: {\n    minWidth: 120,\n    margin: theme.spacing.unit\n  },\n  container: {\n    position: 'absolute',\n    top: '90px',\n    width: '95%'\n  },\n  margin: {\n    margin: theme.spacing.unit,\n    textTransform: 'none'\n  },\n  extendedIcon: {\n    marginRight: theme.spacing.unit,\n  }\n});\n\nclass CreateTutorial extends React.Component {\n\n  state = {\n    title: \"\",\n    error: null,\n    emptyError: false,\n    tutorials: null\n  }\n\n  titleUpdate = event => {\n    this.setState({\n      title: event.target.value\n    })\n  }\n\n  getBranchName = (props) => {\n    const query = new URLSearchParams( props.location.search );\n    for ( let param of query.entries() ) {\n      if (param[0] === 'branch_name') {\n        return param[1];\n      }\n    }\n    return null\n  }\n\n  componentDidMount() {\n    const { repoName } = this.props.match.params;\n    const branchName = this.getBranchName(this.props);\n    axios.get('/tutorials/?repo_name=' + repoName + \"&branch_name=\" + branchName + \"&repo_create=true\")\n      .then(response => {\n        this.setState({\n          tutorials: response.data\n        })\n\n      })\n      .catch(error => {\n        console.log(error)\n        this.setState({\n          error: error,\n          loading: false\n        })\n      })\n  }\n\n  createTutorial = () => {\n    this.setState((prevState, props) => {\n      return {loading: prevState.title === \"\" ? false: true, emptyError: prevState.title === \"\" ? true: false}\n    })\n    if(this.state.title !== \"\") {\n      const csrftoken = getCookie('csrftoken');\n      const { repoName } = this.props.match.params;\n      const branchName = this.getBranchName(this.props)\n      const postData = {\n        title: this.state.title,\n        branch_name: branchName,\n        repo_name: repoName,\n        repo_data: this.props.repoData\n      };\n      axios.defaults.headers.common['X-CSRFToken'] = csrftoken;\n      axios.post('/tutorials/create_or_get', postData)\n      .then(response => {\n        const data = response.data;\n        if(data.created) {\n          this.setState({loading: false})\n          this.props.history.push(\"/tutorials/create/\" + repoName + \"/\" + data.tutorial_data.id + \"/\" + data.tutorial_data.slug + \"/\" + branchName)\n        }\n\n      })\n      .catch(error => {\n        console.log(error);\n        this.setState({\n          error: error,\n        })\n      })\n\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { repoName } = this.props.match.params;\n    const branchName = this.getBranchName(this.props)\n    const tutorials = this.state.tutorials ?\n    this.state.tutorials.results.map((tutorial, index) => {\n      return <MediaCard\n        key={tutorial.id}\n        link={\"/tutorials/create/\" + repoName + \"/\" + tutorial.id + \"/\" + tutorial.slug + \"/\" + branchName}\n        content=<TutorialInfo user={tutorial.user} />\n        title={tutorial.title} />\n    })\n     : null;\n    return (\n      <>\n\n      <div className={classes.container}>\n      <>\n        <TextField\n          error={this.state.emptyError}\n          id=\"outlined-name\"\n          label=\"Title of your story\"\n          value={this.state.title}\n          onChange={this.titleUpdate}\n          className={classes.textField}\n          margin=\"normal\"\n          variant=\"outlined\"\n        />\n\n        <Fab\n          variant=\"extended\"\n          onClick={this.createTutorial}\n          disabled={this.state.loading}\n          size=\"medium\"\n          color=\"primary\"\n          aria-label=\"Add\"\n          className={classes.margin}\n        >\n          <IconContext.Provider value={{ size: '2em' }}>\n          <MdGrade className={classes.extendedIcon} />\n          </IconContext.Provider>\n          Create your Story\n        </Fab>\n        </>\n\n        {tutorials ?\n          <>\n            <h4 className={classes.margin}>Tutorials with this branch and repo</h4>\n            {tutorials}\n          </>\n        : null}\n\n        </div>\n      </>\n    )\n  }\n}\n\nconst connectStateToProps = state => {\n  return {\n    repoData: state.rdReducer.repoData\n  }\n}\n\nexport default withErrorHandler(withStyles(styles)(withRouter(connect(connectStateToProps, null)(CreateTutorial))), axios, \"circular\")\n"],"sourceRoot":""}